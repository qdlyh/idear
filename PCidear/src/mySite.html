<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=980, user-scalable=no, target-densitydpi=device-dpi">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/communal.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/shopping.css">
    <link rel="stylesheet" href="css/site.css">
    <title>我的订单</title>
    <style>

    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <div class="header-box">
                <span class="header-img-left"><img src="images/logo.png" alt=""></span>
                <span class="header-img-right"><img src="images/151561561.png" alt=""></span>
            </div>
        </div>
        <div class="shopping">
            <!-- <div class="top-img">
                <img src="images/15156165.png" alt="" style="width:100%;">
            </div> -->
            <div class="shopping-msg">
                <div class="message-left">
                    <div class="msg-left-top">
                        <h4>13030303030</h4>
                        <p>会员等级:注册会员</p>
                        <p>我的积分:30000</p>
                        <a href="#" class="integral">积分规则</a>
                        <div class="btn-blue shopping-btn">
                            <a href="javascript:;">退出登录</a>
                        </div>
                    </div>
                    <div class="msg-left-nav">
                        <ul>
                            <li class="nav-border"><a href="#">我的购物车<span class="count">(0)</span></a></li>
                            <li><a href="#">我的订单<span class="count">(0)</span></a></li>
                            <li><a href="#">我的积分<span class="count">(3000)</span></a></li>
                            <li><a href="#">发票信息</a></li>
                            <li><a href="#">我的个人资料</a></li>
                            <li><a href="#">我的收货地址</a></li>
                            <li><a href="#">安全中心</a></li>
                        </ul>
                    </div>
                </div>
                <div class="message-right">
                    <div class="add-Site">
                        <p class="message-text">我的收货地址</p>
                        <a href="#" class="addSite">添加收货地址</a>
                    </div>
                    <div class="hr"></div>
                    <div class="site-box">
                        <!-- 编辑收货地址 -->
                        <div class="compile-form">
                            <form action="" id="form">
                                <span class="right-input">收货人：</span><input type="text" class="myName" maxlength="10"><br/>
                                <span class="right-input">手机号：</span><input type="number" class="phone" oninput='if(value.length>11)value=value.slice(0,11)'><br/>
                                <!-- <span>所在地区：</span><input type="text"><br/> -->
                                <div class="province">
                                    <span>所在地区：</span>
                                    <select name="user.province" id="province"></select>
                                    <select name="user.city" id="city"></select>
                                    <select name="user.area" id="area"></select>
                                </div>
                                <div class="site-textarea">
                                    <span>详细地址：</span>
                                    <textarea name="" id="" cols="30" rows="10" oninput='if(value.length>250)value=value.slice(0,250)'></textarea>
                                </div>
                                <div class="site-checkbox">
                                    <label>
                                    <input type="checkbox">
                                    <i></i>                       
                                <span>保存为默认收货地址</span>
                            </label>
                                </div>
                            </form>

                            <div class="btn-blue site-btn">
                                <a href="javascript:;">保存收货地址</a>
                            </div>
                        </div>
                        <!-- 保存显示的收货地址 -->
                        <div class="my-site">
                            <div class="my-site-box" onclick="defaultSite(this)">
                                <i class="delete-id">78</i>
                                <ul>
                                    <li>姓名：张三</li>
                                    <li class="middle">联系:1303030303</li>
                                    <li>地址:地球1</li>
                                </ul>
                                <ul class="my-site-text-right">
                                    <li class="blue-color active-color">默认</li>
                                    <li class="middle compile blue-color" onclick="compileSite(this)">修改</li>
                                    <li class="delete-site" onclick="deleteSite(this)">删除</li>
                                </ul>
                            </div>

                            <div class="my-site-box" onclick="defaultSite(this)">
                                <i class="delete-id">79</i>
                                <ul>
                                    <li>姓名：张三</li>
                                    <li class="middle">联系:1303030303</li>
                                    <li>地址:地球2</li>
                                </ul>
                                <ul class="my-site-text-right">
                                    <li class="blue-color active-color">默认</li>
                                    <li class="middle compile blue-color" onclick="compileSite(this)">修改</li>
                                    <li class="delete-site" onclick="deleteSite(this)">删除</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="js/jquery.js"></script>
    <script src="js/pcasunzip.js" charset="gb2312"></script>
    <script>
        /* 城市选择默认 */
        new PCAS("user.province", "user.city", "user.area", "--请选择省份--", "--请选择城市--", "--请选择地区--");

        /* 没以保存的地址显示编辑表单 */
        if ($('.my-site-box').length !== 0) {
            $('.compile-form').hide()
            $('.my-site').show()
        } else {
            $('.compile-form').show()
            $('.my-site').hide()
        }
        // if($('.my-site-box')!=0){
        //     var count = $('.my-site-box').length;
        //     $('.site-count').text(count)
        // }
        // $('.my-site-box').click(function () {
        //     $(this).addClass('active').siblings().removeClass('active')
        // })
        // $('.delete-site').click(function () {
        //     /* 删除的id */
        //     var ids = $(this).parents('.my-site-box').find('.delete-id').text();
        //     console.log(ids)
        //     $(this).parents('.my-site-box').remove()
        // })

        /* 默认地址 */
        function defaultSite(index) {
            var _this = $(index);
            _this.addClass('active').siblings().removeClass('active');
        }

        /* 修改地址 */
        function compileSite(index) {
            var _this = $(index);
            $('.compile-form').show()
            $('.my-site').hide()
        }

        /* 删除保存的收货地址 */
        function deleteSite(index) {
            var _this = $(index);
            /* 删除的id */
            var ids = _this.parents('.my-site-box').find('.delete-id').text();
            console.log(ids)
            $(index).parents('.my-site-box').remove();
        }
        $('.addSite').click(function () {
            $('.compile-form').show()
            $('.my-site').hide()
        })


        /* 表单提交处 */
        $('.site-btn a').click(function () {
            /* 城市地址 */
            var getpro = document.getElementById("province").value;
            var getcity = document.getElementById("city").value;
            var getarea = document.getElementById("area").value;
            //console.log(getpro + " " + getcity + " " + getarea);

            var phone = $('.phone').val();
            var myName = $('.myName').val();
            var ifFalse = true;
            if (phone === '') {
                alert('手机不能为空')
                ifFalse = false;
                return false;
            } else if (!/(^1[3|5|8][0-9]{9}$)/.test(phone)) {
                alert('手机号码不正确')
                ifFalse = false;
                return false;
            }
            if (myName === '') {
                alert('收货人不能为空')
                ifFalse = false;
                return false;
            }
            if (getpro === '') {
                alert('请选择所在位置')
                ifFalse = false;
                return false;
            }
            ifFalse = true;
            //console.log(ifFalse)

            /* 添加保存的地址 */
            if (ifFalse === true) {
                var mySite_box =
                    `<div class="my-site-box" onclick="defaultSite(this)">
                                <i class="delete-id">70</i>
                                <ul>
                                    <li>姓名：张三</li>
                                    <li class="middle">联系:1303030303</li>
                                    <li>地址:地球1</li>
                                </ul>
                                <ul class="my-site-text-right">
                                    <li class="blue-color active-color">默认</li>
                                    <li class="middle compile blue-color" onclick="compileSite(this)">修改</li>
                                    <li class="delete-site" onclick="deleteSite(this)">删除</li>
                                </ul>
                            </div>`
                $('.my-site').append(mySite_box);
                $('.compile-form').hide();
                $('.my-site').show()
            }
        })
    </script>
</body>

</html>